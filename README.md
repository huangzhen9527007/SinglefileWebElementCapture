# SinglefileWebElementCapture Tool (V3.7)
🚀 **突破虚拟滚动限制，实现动态网页的高保真内容提取与存档。**


## 📝 项目简介
在现代网页开发中，**虚拟列表/动态渲染**技术被广泛应用于Google AI Studio和Twitter等复杂应用中。传统的浏览器保存mhtml、单文件HTML捕获页面保存工具（如SingleFile）或截图捕获页面工具（如GoFullPage）虽然能够解决90%的保存问题。然而，在处理虚拟列表/动态渲染内容时，系统会物理性地销毁滚动到视口之外的内容，这往往会导致保存后部分信息缺失或使用上灵活性不足。此工具旨在进一步提升技术人员收集和整理基础信息和数据的能力。

**# SinglefileWebElementCapture Tool (V3.7) Tool** 专为破解这一难题而生。它通过“内存抢救”机制，在 DOM 节点被销毁前将其克隆至影子容器（Shadow Container），同时通过手动标记辅助的方式，确保每一条动态加载的数据都能被完整保留到html中，在最大限度保留所有元素的同时，重构HTML中每个内容块的独立流式布局，并获得最广泛的兼容性，虽然不能完美还原原有网页的结构，甚至有些乱，但它的目的是作为主流保存工具的有效补充，并最大限度将所有网页元素尽可能地保存到一个文件中。它是 GoFullPage 和 SingleFile 完美高保真保存组合的有效补充工具。

---

## ✨ 主要特点
*   **🧩 动态内容拦截**：针对虚拟列表设计的“滚动即捕获”逻辑，解决长对话保存缺失问题，虽然这一部分没能达到实用状态，但指出了一个可能的技术方向，主要作为实验性质。
*   **🎯 智能向上寻踪**：即便识别到细微的代码块，也能自动定位并捕获其最顶层的逻辑容器（如 `ms-chat-turn`）。
*   **🛡️ 三重查重引擎**：
    *   **纯物理 ID 模式**：极速、精准。
    *   **混合索引模式（默认）**：结合物理 ID 与内容指纹，防止动态 ID 复用导致的数据丢失。
    *   **纯内容指纹模式**：完全基于文本特征，适配无固定 ID 的流式网页。
*   **🪄 手动标记与智能插入**：支持鼠标选中任意内容一键捕获，并能根据上下文逻辑自动插入到文档中间，而非简单的末尾追加。你可以永远信赖手动标记作为有效辅助手段，通过优化的手动标记保存并整合到需要保存的html文件中，他提供了一种折衷但有效的动态数据保存方案，比保存到word、txt更高效，版式更好、数据和信息更集中。
*   **🎨 高保真存档**：完美继承原网页的 CSS 变量、字体（如 Inter）、Body 类名及暗黑模式排版。
*   **💾 双导出引擎**：
    *   **前端直接下载 (Blob)**：支持 200+ 以上超大规模容器导出，不触发浏览器通信限制。
    *   **后台下载器**：标准文件管理模式。
*   **🖱️ 可移动 UI 面板**：自由拖拽的交互界面，不遮挡操作视窗。

---

## 🚀 安装过程

### 方法 1：开发者模式加载（推荐）
1.  点击页面顶部的 `Code` -> `Download ZIP` 或通过 `git clone` 克隆本仓库。
2.  打开 Chrome 浏览器，进入 `chrome://extensions/` 页面。
3.  在右上角开启**“开发者模式”**。
4.  点击左上角的**“加载已解压的扩展程序”**。
5.  选择本项目所在的文件夹即可。

---

## 🎯 使用方法
1.  **打开目标页面**：如 [Google AI Studio](https://aistudio.google.com/)。
2.  **唤醒面板**：点击工具栏上的插件图标（建议将其固定）。
3.  **配置模式**：下拉框选择“Google AI Studio 模式”或“通用列表模式”或“完全自定义模式”。
4.  **辅助捕获**：若发现遗漏，开启“手动标记辅助”，选中文字并点击“捕获选中字符串”。（优先）
5.  **开始录制**：**缓慢向下滚动网页**，确保所有需要保存的信息浏览一遍，全部经过视窗后，确认无误，再点击“开始录制”按钮，然后关闭录制。（注意：录制过程中，请勿反复拖动滚动条反覆录制内容，内容过多时可能会顺序杂乱和卡顿）
6.  **保存文档**：录制结束后，点击“前端直接下载”生成 HTML 文件。或选择文件联动处理，在已有文件的基础上进一步保存。

> **进阶技巧**：1、先手动捕获所有动态内容，如：提示词，保存一遍，得到纯提示词版，再点击开始录制所有html内容，然后再保存一遍，得到全部网页元素版。

---

## ⚙️ 核心配置说明
| 参数 | 说明 |
| :--- | :--- |
| **识别关键词** | 自定义需要识别的 DOM 类名或标签名 |
| **顶层容器** | 捕获后向上追溯的终点（保持内容块完整） |
| **扫描频率** | 默认 150ms，在高负载页面可手动调低 |
| **上下文插入** | 激活后，手动捕获的内容会自动根据其在原页面的位置排序，实验性质，效果不理想，不建议构选。 |

---

## 📱 兼容性与限制
*   **支持环境**：Chrome 88+ / Edge / Brave 等 Chromium 内核浏览器。
*   **页面类型**：支持 HTTP、HTTPS 及本地文件。
*   **已知限制**：无法在 `chrome://` 系统内置页面运行。针对极其严苛的 CSP 策略页面，优先建议使用“前端直接下载”。

---

## 📄 许可证
本项目采用 **MIT 许可证**。详情请参阅 [LICENSE](LICENSE) 文件。

---

## 🙏 致谢
*   感谢 [Google AI Studio](https://aistudio.google.com/) 提供的测试环境和极其优秀的AI。
*   致敬 [SingleFile](https://github.com/gildas-lormeau/SingleFile) 与 [GoFullPage](https://github.com/MethOS-32bit/GoFullPage---Full-Page-Screen-Capture) 为网页存档作出的贡献。

⭐ **如果这个项目解决了您的痛点，请点一个 Star 支持作者！**